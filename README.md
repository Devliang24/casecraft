# CaseCraft

ä½¿ç”¨ BigModel LLM è§£æ API æ–‡æ¡£ï¼ˆOpenAPI/Swaggerï¼‰å¹¶ç”Ÿæˆç»“æ„åŒ–æµ‹è¯•ç”¨ä¾‹çš„ CLI å·¥å…·ã€‚

## ğŸ†• æœ€æ–°æ›´æ–° (2025-08-05)

- **æ™ºèƒ½åŠ¨æ€ç”Ÿæˆ**: æ ¹æ® API æ¥å£å¤æ‚åº¦è‡ªåŠ¨è°ƒæ•´æµ‹è¯•ç”¨ä¾‹æ•°é‡ï¼ˆ5-12ä¸ªï¼‰
- **è´¨é‡ä¼˜å…ˆ**: å¼ºè°ƒç”Ÿæˆæœ‰æ„ä¹‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œé¿å…ä¸ºå‡‘æ•°è€Œç”Ÿæˆå†—ä½™ç”¨ä¾‹
- **å¤æ‚åº¦è¯„ä¼°**: è‡ªåŠ¨åˆ†ææ¥å£å‚æ•°ã€è¯·æ±‚ä½“ã€è®¤è¯ç­‰å› ç´ ç¡®å®šé€‚åˆçš„ç”¨ä¾‹æ•°é‡

## æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ**: åˆ©ç”¨ BigModel GLM-4.5-X è‡ªåŠ¨ç”Ÿæˆå…¨é¢çš„æµ‹è¯•åœºæ™¯
- ğŸ“Š **åŠ¨æ€ç”¨ä¾‹æ•°é‡**: æ ¹æ®æ¥å£å¤æ‚åº¦æ™ºèƒ½è°ƒæ•´ç”Ÿæˆæ•°é‡ï¼ˆç®€å•5-6ä¸ªï¼Œå¤æ‚10-12ä¸ªï¼‰
- ğŸ“š **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒ OpenAPI 3.0 å’Œ Swagger 2.0 (JSON/YAML)
- ğŸ”„ **å¢é‡ç”Ÿæˆ**: åªä¸ºå˜æ›´çš„ API ç”Ÿæˆæ–°æµ‹è¯•ï¼ŒèŠ‚çœæ—¶é—´å’Œæˆæœ¬
- âš¡ **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šçº¿ç¨‹å¤„ç†ï¼Œå¯é€šè¿‡ `--workers` å‚æ•°è°ƒæ•´ï¼ˆBigModel ç›®å‰é™åˆ¶ä¸º 1ï¼‰
- ğŸ¨ **çµæ´»è¾“å‡º**: æ”¯æŒ JSON æ ¼å¼ï¼Œæœªæ¥æ”¯æŒ pytestã€jest ç­‰
- ğŸŒ **åŒè¯­æ”¯æŒ**: å®Œç¾æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æ–‡æ¡£åŠæµ‹è¯•ç”¨ä¾‹

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pip install casecraft
```

### åˆå§‹åŒ–é…ç½®

```bash
casecraft init
```

é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ `~/.casecraft/config.yaml`ï¼ŒåŒ…å« BigModel API å¯†é’¥ç­‰è®¾ç½®ã€‚

> **æç¤º**: å¦‚éœ€ä½¿ç”¨ BigModel APIï¼Œå¯ä»¥åœ¨ [BigModel å¼€æ”¾å¹³å°](https://open.bigmodel.cn/) ç”³è¯· API å¯†é’¥ã€‚

### ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹

```bash
# ä» URL ç”Ÿæˆ
casecraft generate https://petstore.swagger.io/v2/swagger.json

# ä»æœ¬åœ°æ–‡ä»¶ç”Ÿæˆ
casecraft generate ./api-docs.yaml

# ä½¿ç”¨è¿‡æ»¤å™¨
casecraft generate ./openapi.json --include-tag users --exclude-tag admin

# æŒ‡å®šå¹¶å‘æ•°ï¼ˆæœªæ¥æ”¯æŒå…¶ä»– LLM æ—¶å¯ç”¨ï¼‰
casecraft generate ./api.yaml --workers 4

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸è°ƒç”¨ LLMï¼‰
casecraft generate ./api.yaml --dry-run
```

## å‘½ä»¤å‚è€ƒ

### `casecraft init`

åˆå§‹åŒ– CaseCraft é…ç½®ï¼Œè®¾ç½® BigModel API å¯†é’¥å’Œé»˜è®¤å‚æ•°ã€‚

### `casecraft generate <source>`

ä» API æ–‡æ¡£ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚

**å‚æ•°:**
- `source`: OpenAPI/Swagger æ–‡æ¡£çš„ URL æˆ–æ–‡ä»¶è·¯å¾„

**é€‰é¡¹:**
- `--output, -o`: è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼š`test_cases`ï¼‰
- `--include-tag`: åªåŒ…å«æŒ‡å®šæ ‡ç­¾çš„ç«¯ç‚¹
- `--exclude-tag`: æ’é™¤æŒ‡å®šæ ‡ç­¾çš„ç«¯ç‚¹
- `--include-path`: åªåŒ…å«åŒ¹é…æ¨¡å¼çš„è·¯å¾„
- `--workers, -w`: å¹¶å‘å·¥ä½œçº¿ç¨‹æ•°ï¼ˆé»˜è®¤ï¼š1ï¼ŒBigModel åªæ”¯æŒ 1ï¼‰
- `--force`: å¼ºåˆ¶é‡æ–°ç”Ÿæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
- `--dry-run`: é¢„è§ˆæ¨¡å¼ï¼Œä¸è°ƒç”¨ LLM
- `--organize-by`: æŒ‰æ ‡ç­¾ç»„ç»‡è¾“å‡ºæ–‡ä»¶

## é…ç½®

é…ç½®æ–‡ä»¶ (`~/.casecraft/config.yaml`) ç¤ºä¾‹ï¼š

```yaml
llm:
  model: glm-4.5-x
  api_key: your-bigmodel-api-key
  base_url: https://open.bigmodel.cn/api/paas/v4
  timeout: 60
  max_retries: 3
  temperature: 0.7

output:
  directory: test_cases
  organize_by_tag: false
  filename_template: "{method}_{path_slug}.json"

processing:
  workers: 1  # BigModel åªæ”¯æŒå•å¹¶å‘
```

### ç¯å¢ƒå˜é‡é…ç½®

æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½® API å¯†é’¥ï¼š

```bash
# BigModel API
export BIGMODEL_API_KEY="your-api-key"

# æˆ–ä½¿ç”¨é€šç”¨ç¯å¢ƒå˜é‡
export CASECRAFT_LLM_API_KEY="your-api-key"
```

## è¾“å‡ºæ ¼å¼

æ¯ä¸ªç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹éµå¾ªä»¥ä¸‹ JSON ç»“æ„ï¼š

```json
{
  "name": "åˆ›å»ºç”¨æˆ·æˆåŠŸ",
  "description": "ä½¿ç”¨æ‰€æœ‰å¿…å¡«å­—æ®µæµ‹è¯•ç”¨æˆ·åˆ›å»ºæˆåŠŸçš„åœºæ™¯",
  "method": "POST",
  "path": "/users",
  "headers": {"Content-Type": "application/json"},
  "query_params": {},
  "body": {"name": "å¼ ä¸‰", "email": "zhangsan@example.com"},
  "expected_status": 201,
  "expected_response_schema": {...},
  "test_type": "positive",
  "tags": ["users", "crud"],
  "metadata": {
    "generated_at": "2024-01-01T12:00:00Z",
    "api_version": "1.0.0",
    "llm_model": "glm-4.5-x"
  }
}
```

## æµ‹è¯•ç”¨ä¾‹è¦†ç›–

### åŠ¨æ€ç”¨ä¾‹ç”Ÿæˆï¼ˆæ™ºèƒ½è°ƒæ•´ï¼‰

CaseCraft ä¼šæ ¹æ®æ¥å£å¤æ‚åº¦è‡ªåŠ¨è°ƒæ•´ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ•°é‡ï¼š

#### ğŸŸ¢ ç®€å•æ¥å£ï¼ˆ5-6ä¸ªç”¨ä¾‹ï¼‰
- **ç‰¹å¾**: æ— å‚æ•°æˆ–å°‘é‡å‚æ•°çš„ GET è¯·æ±‚
- **æ­£å‘æµ‹è¯•**: 2ä¸ª
- **è´Ÿå‘æµ‹è¯•**: 2-3ä¸ª
- **è¾¹ç•Œæµ‹è¯•**: 1ä¸ª
- **ç¤ºä¾‹**: `GET /health`, `GET /version`

#### ğŸŸ¡ ä¸­ç­‰å¤æ‚åº¦ï¼ˆ7-9ä¸ªç”¨ä¾‹ï¼‰
- **ç‰¹å¾**: å¸¦æŸ¥è¯¢å‚æ•°çš„ GET è¯·æ±‚ï¼Œç®€å•çš„ POST æ“ä½œ
- **æ­£å‘æµ‹è¯•**: 2-3ä¸ª
- **è´Ÿå‘æµ‹è¯•**: 3-4ä¸ª
- **è¾¹ç•Œæµ‹è¯•**: 1-2ä¸ª
- **ç¤ºä¾‹**: `GET /users?page=1&limit=10`, `POST /login`

#### ğŸ”´ å¤æ‚æ¥å£ï¼ˆ10-12ä¸ªç”¨ä¾‹ï¼‰
- **ç‰¹å¾**: åµŒå¥—è¯·æ±‚ä½“çš„ POST/PUTï¼Œå¤šä¸ªå¿…å¡«å‚æ•°ï¼Œè®¤è¯è¦æ±‚
- **æ­£å‘æµ‹è¯•**: 3-4ä¸ª
- **è´Ÿå‘æµ‹è¯•**: 4-5ä¸ª
- **è¾¹ç•Œæµ‹è¯•**: 2-3ä¸ª
- **ç¤ºä¾‹**: `POST /orders`, `PUT /users/{id}/profile`

### å¤æ‚åº¦è¯„ä¼°å› ç´ 

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯„ä¼°ä»¥ä¸‹å› ç´ æ¥ç¡®å®šæ¥å£å¤æ‚åº¦ï¼š
- å‚æ•°æ•°é‡ï¼ˆè·¯å¾„ã€æŸ¥è¯¢ã€å¤´éƒ¨ï¼‰
- è¯·æ±‚ä½“ç»“æ„ï¼ˆåµŒå¥—å¯¹è±¡ã€æ•°ç»„ï¼‰
- HTTP æ–¹æ³•ç±»å‹
- è®¤è¯è¦æ±‚
- å“åº”ç±»å‹æ•°é‡

## å¼€å‘

### ç¯å¢ƒè®¾ç½®

```bash
git clone https://github.com/yourusername/casecraft.git
cd casecraft
pip install -e ".[dev]"
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=casecraft

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
pytest tests/unit/
pytest tests/integration/
```

### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–ä»£ç 
black casecraft tests

# ä»£ç æ£€æŸ¥
ruff casecraft tests

# ç±»å‹æ£€æŸ¥
mypy casecraft
```

## æœ€ä½³å®è·µ

1. **API æ–‡æ¡£å‡†å¤‡**
   - ç¡®ä¿ API æ–‡æ¡£å®Œæ•´ä¸”å‡†ç¡®
   - åŒ…å«è¯¦ç»†çš„å‚æ•°æè¿°å’Œç¤ºä¾‹
   - æ˜ç¡®æ ‡æ³¨è®¤è¯è¦æ±‚

2. **æ‰¹é‡ç”Ÿæˆä¼˜åŒ–**
   - ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬å¤„ç†å¤§å‹ API
   - åˆ©ç”¨å¢é‡ç”ŸæˆåŠŸèƒ½é¿å…é‡å¤
   - åˆç†è®¾ç½®é‡è¯•å’Œè¶…æ—¶å‚æ•°

3. **è´¨é‡ä¿è¯**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®æ¥å£å¤æ‚åº¦ç”Ÿæˆé€‚é‡çš„æµ‹è¯•ç”¨ä¾‹
   - æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½æœ‰æ˜ç¡®çš„æµ‹è¯•ç›®çš„
   - é¿å…ç”Ÿæˆé‡å¤æˆ–æ— æ„ä¹‰çš„æµ‹è¯•

4. **æ€§èƒ½ä¼˜åŒ–**
   - BigModel API æ”¯æŒå•å¹¶å‘ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨ä¼˜åŒ–
   - ä½¿ç”¨å¢é‡ç”Ÿæˆæ¨¡å¼å‡å°‘ API è°ƒç”¨
   - åˆç†ä½¿ç”¨ `--dry-run` é¢„è§ˆæ¨¡å¼

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è·¯çº¿å›¾

- [x] ~~æ™ºèƒ½åŠ¨æ€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼ˆå·²å®Œæˆï¼‰~~
- [x] ~~æ¥å£å¤æ‚åº¦è‡ªåŠ¨è¯„ä¼°ï¼ˆå·²å®Œæˆï¼‰~~
- [ ] ç›´æ¥ç”Ÿæˆå¯æ‰§è¡Œæµ‹è¯•ä»£ç ï¼ˆpytestã€jestï¼‰
- [ ] æ”¯æŒ Postman Collection å¯¼å‡º
- [ ] äº¤äº’å¼ TUI ç•Œé¢
- [ ] æµ‹è¯•ç”¨ä¾‹æ™ºèƒ½å»é‡
- [ ] æ’ä»¶ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰æ ¼å¼åŒ–å™¨
- [ ] æ”¯æŒæ›´å¤š LLM æä¾›å•†ï¼ˆOpenAIã€Anthropic ç­‰ï¼‰
- [ ] æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå’Œç»“æœéªŒè¯
- [ ] API å˜æ›´å½±å“åˆ†æ

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼è¯¦è§ [CONTRIBUTING.md](CONTRIBUTING.md)ã€‚

## ç›¸å…³æ–‡æ¡£

- [éœ€æ±‚æ–‡æ¡£](docs/éœ€æ±‚æ–‡æ¡£.md) - è¯¦ç»†çš„äº§å“éœ€æ±‚è¯´æ˜
- [CLAUDE.md](CLAUDE.md) - Claude AI å¼€å‘æŒ‡å¯¼æ–‡æ¡£